<!doctype html>
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<% # if we got any meta tag info from request display it, otherwise just render head normally %>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# shelbytv: http://ogp.me/ns/fb/shelbytv#" profile="http://www.w3.org/2005/10/profile">
  <meta charset="utf-8">

  <title><%= render :partial => "/home/title_tag" %></title>

  <%= render :partial => "/home/meta_info" %>
  <meta name="viewport" content="width=device-width">

  <%= stylesheet_link_tag "landing", :media => "screen" %>
  <!--[if lt IE 9]><%= stylesheet_link_tag "png", :media => "screen, projection" %><![endif]-->
  <%= javascript_include_tag "common", "landing" %>

  <script>
    var shelbyTrackingCategory = "Landing Page";
  </script>
</head>
<body class="shelby shelby--landing<%= ' shelby--mobile' if @mobile_os %>">
  <div class="shelby__wrapper">
    <header class="shelby__header clearfix" role="banner">
      <button class="button_primer shelby-logo js-home">
        <% if Rails.env != "staging" %>
          <h1 class="shelby_logo">
            <span class="icon-mark"></span><span class="icon-type"></span><span class="ir">Shelby.tv</span>
          </h1>
        <% else %>
          <h1 class="shelby-title-staging">
            <%= Settings::Branch.branch %>
          </h1>
        <% end %>
      </button>

      <nav class="guide-presentation-selector">
        <ul class="guide-nav-list clearfix">
          <li class="dropdown_module guide-nav-item secondary-item guide-login">
            <button class="dropdown_button nav-button">
              <i class="dropdown_icon">
                Log In
              </i>
            </button>

            <section class="dropdown_section login-section">
              <div class="dropdown_lining login-section-lining clearfix">

                <form accept-charset="UTF-8" action="<%= Settings::ShelbyAPI.login_form_url %>" method="post" class="form_module form_module--login-form js-track-submit" data-ga_action="Email login">
                  <fieldset class="form_fieldset">
                    <label for="username" class="form_label">Username</label>
                    <input id="username" name="username" placeholder="Username or Email address" class="form_input" />
                  </fieldset>

                  <fieldset class="form_fieldset">
                    <label for="password" class="form_label">Password</label>
                    <input id="password" name="password" type="password" placeholder="•••••••••" class="form_input" />
                  </fieldset>

                  <fieldset class="form_fieldset">
                    <input name="commit" type="submit" value="Login" class="button_primer button_gray-medium form_submit" />
                    <a href="<%= "#{Settings::ShelbyAPI.url}/user/password/new" %>" class="login-forgot-password">Forgot your password?</a>
                  </fieldset>
                </form>

                <hr class="hr--double" />

                <div class="form_fieldset form_fieldset--login-social clearfix">
                  <h4 class="form_legend">
                    Log in with
                  </h4>

                  <a href="<%= "#{Settings::ShelbyAPI.url}/auth/twitter" %>"
                     class="button_primer button_twitter-blue button_primer--twitter js-track-event js-authorize"
                     data-ga_action="Login with Twitter"
                     data-popup_height="700"
                     data-popup_width="600">
                    <i class="icon-social_twitter"></i>
                    Twitter
                  </a>

                  <a href="<%= "#{Settings::ShelbyAPI.url}/auth/facebook" %>"
                     class="button_primer button_facebook-blue button_primer--facebook js-track-event js-authorize"
                     data-ga_action="Login with Facebook"
                     data-popup_height="650"
                     data-popup_width="1000">
                    <i class="icon-social_facebook"></i>
                    Facebook
                  </a>
                </div>
              </div>
            </section>
          </li><!-- eo login button/dropdown -->

          <li class="guide-nav-item secondary-item guide-search">
            <form id="js-nav-search-form" class="nav-search-form" action="/search">
              <span class="button_icon icon_search icon nav-search-form-text js-nav-search-form-text-wrapper">
                <input name="query" type="text" placeholder="Search the Videoverse" class="js-nav-search-form-text" id="js-nav-search-form-text" tabindex="0"/>
              </span>
            </form>
          </li>
        </ul>
      </nav>
    </header>

    <% if @access_error or @invite_error or @auth_failure or (flash[:error] == "401") %>
      <section class="shelf shelf--error clearfix">
        <div class="shelf__lining">
          <% if @access_error %>
            <p class="shelf__block shelf__block--noaccess js-signin-error">
              Sorry, you do not have access to the beta…<br>
              <a href="http://shelby.tv/blog/post/26927127539/new-shelby-shutdown">Learn what's coming</a>.
            </p>
          <% end %>

          <% if @invite_error %>
            <p class="shelf__block shelf__block--invalid-invite js-signin-error">
              Sorry, that invite is no longer valid.  Please <a href="mailto:contact+invite@shelby.tv">contact us</a> if you have questions.
            </p>
          <% end %>

          <% if @auth_failure %>
            <p class="shelf__block shelf__block--error js-signin-error">
              There was a problem logging you in<%= if @auth_strategy then " with #{@auth_strategy}" end%>.
              <br/>Please try again.
            </p>
          <% end %>

          <% if (flash[:error] == "401") %>
            <p class="shelf__block shelf__block--error js-signin-error">
              Session expired, please log in again!
            </p>
          <% end %>
        </div>
      </section>
    <% end %>

    <% #------------ Shelf Content --------------- %>

    <%= render :partial => "/home/shelf/invite" if @invite_id %>

    <%= render :partial => "/home/shelf/team" if @team %>

    <% if (!@share_type) and !@invite_id and !@team %>
      <%= render :partial => "/home/shelf/sign_up" %>
      <%= render :partial => "/home/shelf/community" %>
      <%= render :partial => "/home/shelf/network" %>
      <%= render :partial => "/home/shelf/about" %>
    <% end %>

    <% #------------ /Shelf Content --------------- %>

    <%= render :partial => '/home/landing_footer' %>
    
  </div><!-- /shelby-wrapper -->

  <%= render :partial => '/home/landing_scripts' %>
  
</body>
</html>
