<%
  var messageJSON;
  if (message) {
    messageJSON = message.toJSON();
    messageJSON.text = message.getText();
  } else {
    /*
      if there is no message, create something that looks like
      a message so that the frame displays who created it and when
    */
    var creator = frame.get('creator');
    messageJSON = {
      created_at : frame.get('created_at'),
      realname : (creator ? creator.get('name') : ""),
      user_id : (creator? creator.id : ""),
      user_image_url : (creator ? creator.get('user_image') : "")
    };
  }
%>
<div class="user-vcard clearfix">
  <span class="user-avatar">
    <a class="js-user-personal-roll js-track-event" data-ga_category="Frame" data-ga_action="user roll link" data-ga_label='<%= shelby.models.user.get('nickname') %>' href="#" data-user-id="<%= messageJSON.user_id %>">
      <img src="<%= messageJSON.user_image_url %>" alt="" title="" height="25" width="25">
    </a>
  </span>

  <span class="user-handle">
    <a class="js-user-personal-roll js-track-event" data-ga_category="Frame" data-ga_action="user roll link" data-ga_label='<%= shelby.models.user.get('nickname') %>' href="#" data-user-id="<%= messageJSON.user_id %>">
      <%= messageJSON.realname %>
    </a>
  </span>
  <%
    var timeStampClass = 'user-post-date';
    if (messageJSON.origin_network) timeStampClass += ' user-post-origin-' + messageJSON.origin_network;
  %>
  <span class="<%= timeStampClass %>">
    <%= messageJSON.created_at %>
  </span>
  <div class="user-video-text">
      <p>
        <%= messageJSON.text %>
      </p>
  </div>
</div>
