<% var messages = (frame.get('conversation') && frame.get('conversation').get('messages')) || [] %>
<% var creator = frame.get('creator') %>
<% var creatorThumbnail = creator ? creator.get('user_image_original') : undefined %>
<% var thumbnailText = (creator ? "posted by " + creator.get('nickname') : "video thumbnail") %>
<% var frameIsOnWatchLaterRoll = frame.isOnRoll(shelby.models.user.get('watch_later_roll')) %>

<div class="guide-overlay-header conversation-header">
  <div class="overlay-title-bar">
    <button class="back js-track-event" data-ga_category="Conversation" data-ga_action="cancel" data-ga_label='<%= shelby.models.user.get('nickname') %>'>
      Back
    </button>
    <h2>Comments</h2>
  </div>
  
  <div class="context">
    <div class="frame-thumbnail">
      <% if(frame.get('video').get('thumbnail_url')) { %>
        <img class="" src="<%= frame.get('video').get('thumbnail_url') %>" alt="<%= thumbnailText %>" title="<%= thumbnailText %>">
      <% } else { %>
        <img class="video-thumbnail-missing" src="/images/assets/missing_thumb.svg" alt="posted by <%= thumbnailText %>" title="Thumbnail for video <%= thumbnailText %> is missing">
      <% } %>
    </div>
    <div class="copy">
      <h3 class="frame-creator"><%= creator.get('nickname') %></h3>
      <h2 class="frame-title"><%= frame.get('video').get('title') %></h2>
    </div>
  </div>
  
</div>

<div class="conversation-scroller">
  <ul class="conversation"></ul>
  
  <form class="new-comment clearfix">
    <textarea class="js-add-message-input" rows="1"></textarea>
    <div class="js-frame-comment-error-message frame-comment-error-message"></div>
    <button class="new-comment-submit js-track-event" data-ga_category="Frame" data-ga_action="comment" data-ga_label="<%= shelby.models.user.get('nickname') %>">Comment</button>
  </form>
</div>