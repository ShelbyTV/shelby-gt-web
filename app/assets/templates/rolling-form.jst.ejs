<%
  var creator = frame.get('creator');
  var creatorNickname = creator ? frame.get('creator').get('nickname') : '';
  var messages = (frame.get('conversation') && frame.get('conversation').get('messages')) || [];

  var messageText;
  if (!frame.get('isSearchResultFrame')) {
    messageText = (creatorNickname) ? "&#x2794;@"+creatorNickname : '';
    if(messages.length > 0){
      messageText += ": "+messages.first().get('text');
    }
  } else {
    messageText = '';
  }
%>

<%=
  SHELBYJST['media-module']({
    userAvatar   : libs.shelbyGT.viewHelpers.user.avatarUrl(user),
    userNickname : user.get('nickname') || '',
    messageText  : messageText,
    subline      : false
  })
%>

<%
  var active_networks = [];
  if(user.get('authentications')){
    user.get('authentications').forEach(function(auth){
      active_networks.push(auth.provider);
    });
  }

  var twitter_enabled = _.include(active_networks, 'twitter') ? true : false;
  var facebook_enabled = _.include(active_networks, 'facebook') ? true : false;
%>

<div class="rolling-option">
  <fieldset class="hashtag-option">
    <p class="hashtag-option__legend form_legend">
      Tag your video and be seen by our community.
    </p>
    <ul class="hashtag-option__list list">
      <li class="hashtag-option__list-item hashtag-option__list-item--left">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#thisexists">
          #thisexists
        </button>
      </li>

      <li class="hashtag-option__list-item hashtag-option__list-item--right">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#natureisrad">
          #natureisrad
        </button>
      </li>

      <li class="hashtag-option__list-item hashtag-option__list-item--left">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#greatmoviemoments">
          #greatmoviemoments
        </button>
      </li>

      <li class="hashtag-option__list-item hashtag-option__list-item--right">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#adrenaline">
          #adrenaline
        </button>
      </li>

      <li class="hashtag-option__list-item hashtag-option__list-item--left">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#laugh">
          #laugh
        </button>
      </li>

      <li class="hashtag-option__list-item hashtag-option__list-item--right">
        <button class="button_primer button_gray-medium button_command hashtag-option__button js-hashtag-button" value="#storytellers">
          #storytellers
        </button>
      </li>
    </ul>
  </fieldset>

  <fieldset class="share_module share-option">
    <% if(twitter_enabled) { %>
      <label class="share_label js-toggle-twitter-sharing" for="share-on-twitter" title="Share to Twitter">
        <input id="share-on-twitter" class="share_input share-option-twitter visuallyhidden" name="share-option-twitter" type="checkbox" />
        <span class="ir share_label_icon share-button-twitter">Share to Twitter</span>
      </label>
    <% } %>

    <% if(facebook_enabled) { %>
      <label class="share_label js-toggle-facebook-sharing" for="share-on-facebook" title="Share to Facebook">
        <input id="share-on-facebook" class="share_input share-option-facebook visuallyhidden" name="share-option-facebook" type="checkbox" />
        <span class="ir share_label_icon share-button-facebook">Share to Facebook</span>
      </label>
    <% } %>

    <button id="js-roll-it" class="form_submit button_primer button_blue rolling-submit" type="submit" tabindex="0" onclick="return false;">
      Roll It!
    </button>
  </fieldset>
</div>