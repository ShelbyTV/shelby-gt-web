<% var user = shelby.models.user %>
<% var userNickname = user.get('nickname') %>

<% var video = frame.get('video') %>
<% var videoId = frame.get('id') %>
<% var videoTitle = video.get('title') %>
<% var videoThumbnail = video.get('thumbnail_url') %>

<% var creator = frame.get('creator') %>
<% var creatorNickname = creator.get('nickname') %>
<% /* TODO: REMOVE THIS and MOVE TO template param obj*/ %> <% var creatorAvatar = creator.get('user_image') || '/images/avatar.jpg' %>
<% /* TODO: REMOVE THIS and MOVE TO template param obj*/ %> <% var messages = (frame.get('conversation') && frame.get('conversation').get('messages')) || [] %>

<!-- new videocard -->
<article id="<%= videoId %>" class="xframe">
  <a href="#" onclick="return false;" class="xframe-header js-frame-activate">
    <h1 class="xframe-title" title="<%= videoTitle %>">
     <%= videoTitle %> 
    </h1>
  </a>
  <div class="xframe-body-wrapper clearfix">
    <div class="xframe-body">
      <div class="menu_module xframe-menu">
        <ul class="menu_list xframe-command-menu xframe-list" role="menubar">
          <li class="menu_item" role="menuitem">
            <button class="xframe-command command-queue js-queue-frame<%= (queuedVideosModel.videoIsInQueue(video) ) ? ' queued' : '' %>">
              <i class="command-icon">
                <%= (queuedVideosModel.videoIsInQueue(video) ) ? 'Queued' : 'Queue' %>
              </i>
            </button>
          </li>
          <li class="menu_item" role="menuitem">
            <button class="xframe-command command-roll js-roll-frame js-track-event" data-ga_category="Frame" data-ga_action="Click roll" data-ga_label="<%= userNickname %>">
              <i class="command-icon">
                Rollâ€¦
              </i>
            </button>
          </li>
          <li class="menu_item right command-sublist" aria-haspopup="true">
            <button class="menu_sublist_anchor xframe-command command-more">
              <i class="command-icon">
                More
              </i>
            </button>
            <ul class="menu_sublist xframe-sublist" role="menu">
              <li class="menu_option xframe-item" role="menuitem">
                <button class="xframe-option command-share">
                  Share Video
                </button>
              </li>
              <li class="menu_option xframe-item" role="menuitem">
                <button class="xframe-option command-remove">
                  Remove Video
                </button>
              </li>
            </ul>
          </li>
        </ul>
      </div><!-- eo .xframe-menu -->
      <a href="#" onclick="return false;" class="image_module xframe-thumbnail js-frame-activate<%= (!videoThumbnail) ? ' missing-thumbnail' : '' %>" style="background-image: url('<%= videoThumbnail %>');" role="img">
        <img class="visuallyhidden" src="<%= videoThumbnail %>" title="<%= videoTitle %>" alt="<%= videoTitle %> thumbnail">
      </a>
        <!-- <div class="xframe-thumbnail xframe-thumbnail-missing"></div> -->
    </div><!-- eo .xframe-body -->

    <footer class="media_module xframe-footer">
      <a href="#" onclick="return false;" class="media_image">
        <span class="image_module xuser-avatar" style="background-image: url(<%= creatorAvatar %>);" role="img">
          <img src="<%= creatorAvatar %>" class="visuallyhidden" title="<%= creatorNickname %>" alt="<%= creatorNickname %>">
        </span>
      </a>
      <div class="media_body">
        <p class="xuser-data">
          shared by <strong><%= creatorNickname %></strong> on twitter
        </p>
        <p>
          Just a reminder: We're going to have a pretty amazing event for @jeffemire's UNDERWATER WELDER tomorrow! http://beguiling.com
        </p>
        <p class="xframe-comment">
          <a href="#" onclick="return false;" class="xframe-link xframe-comment-link js-video-activity-toggle js-track-event js-video-activity-toggle-comment" data-ga_category="Frame" data-ga_action="Click show conversation" data-ga_label="<%= userNickname %>">
            Comments (<%= messages.length %>)
          </a>
        </p>
      </div>
    </footer><!-- eo .media_module-->
  </div><!-- eo .xframe-body-wrapper -->
</article>
<!-- end new videocard -->
