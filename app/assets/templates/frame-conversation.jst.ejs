<% var messages = (frame.get('conversation') && frame.get('conversation').get('messages')) || [] %>
<% var creator = frame.get('creator') %>
<% var creatorThumbnail = creator ? libs.shelbyGT.viewHelpers.user.avatarUrl(creator) : undefined %>
<% var creatorNickname = creator.get('nickname') || '' %>
<% var frameTitle = frame.get('video').get('title') || '' %>
<% var thumbnailText = (creator ? "posted by " + creator.get('nickname') : "video thumbnail") %>


<div class="guide-overlay__head guide-overlay__head--conversation">
  <h2 class="guide-overlay__h1">
    Add a new comment within Shelby.tv
  </h2>

  <button class="button_primer button_gray button_icon-only js-cancel js-track-event" data-ga_category="Conversation" data-ga_action="Click cancel" data-ga_label="<%= creatorNickname %>">
    <span class="icon-close"></span>
    <span class="visuallyhidden">Cancel</span>
  </button>
</div><!-- eo guide-overlay-head.conversation-head -->

<div class="guide-overlay__body guide-overlay__body--conversation js-conversation-body">
  <form class="form_module new-comment">
    <h1 class="frame-title" title="<%- frameTitle %>">
      <%= frameTitle || '' %>
    </h1>

    <div class="frame-body-wrapper clearfix">
      <%=
        SHELBYJST['thumbnail-module']({
          thumbnail : frame.get('video').get('thumbnail_url') || '',
          title : frame.get('video').get('title') || ''
        })
      %>
			<% if (!shelby.models.user.isNotLoggedIn() && !shelby.config.hostName) { %>
	      <%=
	        SHELBYJST['frame-conversation-form']({user: user})
	      %>
			<% } %>
    </div><!-- eo frame-body-wrapper -->
		<% if (shelby.config.hostName && (shelby.models.guide.get('displayState') !== libs.shelbyGT.DisplayState.channel)) { %>
			<div id="disqus_thread"></div>
			<%= SHELBYJST['disqus']({frame: frame}) %>
		<% } %>
  </form>
</div><!-- eo overlay_body guide-overlay-body conversation-body -->