<%
  var authed_providers = [];
	if (shelby.models.user.get('authentications') != null){
	  shelby.models.user.get('authentications').forEach(function(auth){
	    authed_providers.push(auth.provider);
	  });		
	}
%>

<div class="onboarding_layout_head onboarding-head clearfix">
  <h1 class="onboarding-header">
    Add some serendipity
  </h1>

  <div class="onboarding-next-step-wrapper">
    <button class="js-onboarding-next-step onboarding-next-step">
      Next
    </button>
    <span class="onboarding-next-step-counter">
      Step 3 of 3
    </span>
  </div>
</div><!-- eo onboarding_layout_head -->

<div class="onboarding_layout_body onboarding-body onboarding-stage-3 clearfix">
  <div class="onboarding-block-container wide">
    <p class="onboarding-description">
      Fact: The best discovery happens through distant connections.<br />
      We don't post without your permission, and we won't spam you.
    </p>
  </div>

  <ul class="clearfix onboarding-network-list">
    <% ['twitter', 'facebook', 'tumblr'].forEach(function(network){ %>
      <%
        var connected_network, disabled = '';
        if( _.include(authed_providers, network) ){
          connected_network = 'onboarding-connected-network';
          disabled = 'disabled';
        }
      %>

      <li class="onboarding-network-item js-onboarding-network-item">
        <div class="onboarding-network-item-lining clearfix">
          <button <%= disabled %> class="<%= connected_network %> js-oauth-popup onboarding-network-button onboarding-network-<%= network %>" type="button" popup-width="600" popup-height="700" location="http://api.shelby.tv/auth/<%= network %>">
            <i class="ir onboarding-icon">
              <%= network %>
            </i>
          </button>
          <p class="onboarding-network-description">
            <% if (connected_network) { %>
              We're already pulling in all the<br/>
              videos the people you follow are<br/>
              sharing on <span><%= network %></span>
            <% } else { %>
              Shelby will pull the videos off your<br> <span><%= network %></span> feed.
            <% } %>
          </p>            
        </div>
      </li>
    <% }); %>
  </ul>
</div><!-- eo onboarding_layout_body -->
